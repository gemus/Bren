<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Crossfit DPL</title>
	<link type="text/css" href="/site_media/css/redmond/jquery-ui-1.7.2.custom.css" rel="stylesheet" />
	<script type="text/javascript" src="/site_media/js/jquery-1.3.2.min.js"></script>
	<script type="text/javascript" src="/site_media/js/jquery-ui-1.7.2.custom.min.js"></script>

	<script type="text/javascript" charset="utf-8">
	$(document).ready(function() {
		// Setup the date picker
		$("#date_picker").datepicker({ dateFormat: 'yy-mm-dd' });

		var classChnagedFunc = function() {
			var theDate = $("#date_picker")[0].value;
			var theClass = $("#class_picker")[0].value;
			$("#showClass").html("<p>Show Class For " + theDate + " with class " + theClass);
		}

		var dateChangedFunc = function() {
			var theDate = $("#date_picker")[0].value;
			$.getJSON("/json_api/", {"id": 1, "method": "get_classes", "params" : [theDate]}, function(result, status) {
				var class_drop_value = '';
				for (i in result.result) {
					var class_row = result.result[i];
					class_drop_value += '<option value="'+class_row.id+'">'+class_row.name+'</option>';
				}
				if (class_drop_value == '') {
					class_drop_value = '<option value="None">No Classes For Selected Date</option>';
				}
				$("#class_picker").html(class_drop_value);
				classChnagedFunc();
			})
		}

		// Hook in the onChange function
		$("#date_picker").change(dateChangedFunc);
		$("#class_picker").change(classChnagedFunc);
	});
	</script>

</head>
<body>
	<h1>Homepage</h1>

	<strong>Select Date:</strong>
	<input id="date_picker" type="text" />

	<strong>Select Class:</strong>

	<select name="class_picker" id="class_picker">
		<option value="no_date">Please Select A Date</option>
	</select>

	<hr />

	<div id="showClass"></div>
</body>
</html>
