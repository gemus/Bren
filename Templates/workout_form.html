<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Crossfit DPL</title>
	<link type="text/css" href="/site_media/css/redmond/jquery-ui-1.7.2.custom.css" rel="stylesheet" />
	<link type="text/css" href="/site_media/css/numpad_input.css" rel="stylesheet" />
	<script type="text/javascript" src="/site_media/js/jquery-1.3.2.min.js"></script>
	<script type="text/javascript" src="/site_media/js/jquery-ui-1.7.2.custom.min.js"></script>
	<script type="text/javascript" src="/site_media/js/numpad_input.js"></script>
	<script type="text/javascript" src="/site_media/js/collapsibleText.js"></script>

	<script type="text/javascript" charset="utf-8">
		$(document).ready(function() {
			$("#workout_time").numPadInput(true);
			$("#workout_reps").numPadInput();

		});
	</script>
</head>
<body>
	<h1>{{ name }} - {{ class_name }}</h1>
	<p><strong>Comments:</strong> {{ comments }}
		{% ifnotequal rounds 1 %}
			{{rounds}} rounds of
		{% endifnotequal %}
	</p>

	<form action="/save_workout/" method="POST">
		<table>
		{{ the_form }}
		</table>

		<hr>

		{% ifequal workout_type 'AMRAP' %}
		<strong>Rounds:</strong>
		<input type="text" name="workout_reps" value="" id="workout_reps">
		{% endifequal %}

		{% ifequal workout_type 'Timed' %}
		<strong>Time:</strong>
		<input type="text" name="workout_time" value="" id="workout_time">
		{% endifequal %}

		<br>
		<input type="submit" value="Save Workout">

		<input type="hidden" name="workout_type" value="{{ workout_type }}" id="workout_type">
		<input type="hidden" name="date_str" value="{{ date_str }}" id="date_str">
		<input type="hidden" name="class_id" value="{{ class_id }}" id="class_id">
	<br><br>	
	
	<b><u>Previous {{ name }} History:</b></u><br>
	{% for workout in co_list%}
		<div onClick="expand('texter', '{{workout.id}}')" class="mainExpand"><b>{{workout.workout}}  
			{% ifequal workout_type 'Timed' %} {{workout.info.time}} {% endifequal %} 
			{% ifequal workout_type 'AMRAP' %} {{workout.info.rounds}} rounds{% endifequal %}
			{{workout.date}} </b><br></div>
			<div id="{{workout.id}}" class="texter">
				{% for variation in workout.variations%}
					{{variation.variation}} {{variation.element}}<br>
				{% endfor %}
			</div>
	{% endfor %}
<br><br>
		<b><u>Element History:</b></u><br>
		{% for element in ele_history %}
		<div onClick="expand('texter', '{{element.element}}')" class="mainExpand"><b>{{element.element}}:</b></div>
			<div id="{{element.element}}" class="texter">
				{% for history in element.history%}
					{{history.date}} {{history.workout}} {{history.rounds}} rounds of {{history.reps}} {{history.variation}} {{element.element}}<br>	
				{% endfor %}
			</div>
		</div>
		{% endfor %}

	</form>
</body>
</html>
