<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Crossfit DPL</title>

	<link rel="stylesheet" type="text/css" href="/site_media/css/reset-min.css">
	<link rel="stylesheet" type="text/css" href="/site_media/css/global.css">
	<link type="text/css" href="/site_media/css/redmond/jquery-ui-1.7.2.custom.css" rel="stylesheet" />
	<link type="text/css" href="/site_media/css/numpad_input.css" rel="stylesheet" />
	<script type="text/javascript" src="/site_media/js/jquery-1.3.2.min.js"></script>
	<script type="text/javascript" src="/site_media/js/jquery-ui-1.7.2.custom.min.js"></script>
	<script type="text/javascript" src="/site_media/js/numpad_input.js"></script>
	<script type="text/javascript" src="/site_media/js/collapsibleText.js"></script>

	<script type="text/javascript" charset="utf-8">
		$(document).ready(function() {
			$("#workout_time").numPadInput(true);
			$("#workout_reps").numPadInput();

		});
	</script>
	<style type="text/css" media="screen">
		h1 {
			font-size: 175%;
			color: #3C5F7F;
		}
		h2 {
			font-size: 125%;
			color: #3C5F7F;
			font-weight: bold;
		}

		div#form_container {
			float: left;
		}

		div#sidebar { float: left; }

			div#sidebar div.side_container {
				border: 1px solid #3C5F7F;
				margin: 0pt 0pt 15px 15px;
			}

				div#sidebar div.side_container h3 {
					background-color: #3C5F7F;
					color: #FFF;
					padding: 7px;
				}

				div#sidebar div.side_container div.content {
					padding: 7px;
				}


	</style>
</head>
<body>
	<h1>{{ name }}</h1>
	<h2>{{ comments }} {% ifnotequal rounds 1 %} {{rounds}} rounds of:{% endifnotequal %}</h2>

	<div id="form_container">
	<form action="/save_workout/" method="POST">
		<table>
		{{ the_form }}
		</table>

		<br>

		{% ifequal workout_type 'AMRAP' %}
		<strong>Rounds:</strong>
		<input type="text" name="workout_reps" value="" id="workout_reps">
		{% endifequal %}

		{% ifequal workout_type 'Timed' %}
		<label for="workout_time">Time:</label>
		<input type="text" name="workout_time" value="" id="workout_time"> MM:SS
		{% endifequal %}

		<br>
		<input type="submit" value="Save Workout">

		<input type="hidden" name="workout_type" value="{{ workout_type }}" id="workout_type">
		<input type="hidden" name="date_str" value="{{ date_str }}" id="date_str">
		<input type="hidden" name="class_id" value="{{ class_id }}" id="class_id">
	</form>
	</div>


	<div id="sidebar">
		<div id="previous_history_container" class="side_container">
			<h3>Previous {{ name }} History:</h3>
			<div class="content">
				<span>{{co_list.error}}</span>
				{% for workout in co_list%}
					<div onClick="expand('texter', '{{workout.id}}')" class="mainExpand"><b>{{workout.workout}}
						{% ifequal workout_type 'Timed' %} {{workout.info.time}} {% endifequal %}
						{% ifequal workout_type 'AMRAP' %} {{workout.info.rounds}} rounds{% endifequal %}
						{{workout.date}} </b><br></div>
						<div id="{{workout.id}}" class="texter">
							{% for variation in workout.variations%}
								{{variation.variation}} {{variation.element}}<br>
							{% endfor %}
						</div>
				{% endfor %}
			</div>
		</div>

		<div id="element_history_container" class="side_container">
			<h3>Element History:</h3>
			<div class="content">
				{% for element in ele_history %}
				<div onClick="expand('texter', '{{element.element}}')" class="mainExpand"><b>{{element.element}}:</b></div>
				<div id="{{element.element}}" class="texter">
					{{element.history.error}}
					{% for history in element.history %}
								{% if history.date %} {{history.date}} {{history.workout}} {{history.rounds}} rounds of {{history.reps}} {{history.variation}} {{element.element}}<br> {% endif %}
					{% endfor %}
				</div>
				{% endfor %}
			</div>
		</div>
	</div>
</body>
</html>
